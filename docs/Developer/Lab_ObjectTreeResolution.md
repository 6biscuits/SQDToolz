# Object tree resolution and parent/child relationships

Consider the two issues:

- It is easier to pass the actual objects to functions - e.g. to a variable, it is nicer to just pass: `lab.HAL('awg').get_segment('init')`.
- Any state in the engine must be possible to actively record to aid in cold reloading

The solution is to uniquely identity an object within the tree of children. The following sections highlight the functions required to enable the identification and the subsequent object resolution given an identifier.

## Object identification

Given some object, the resolution involves backtracking up through every parent until it meets up with a fundamental laboratory object (e.g. a HAL, WFMT, VAR etc.). This is done by implementing a `Parent` property (sometimes it is endowed by the parent object - e.g. `WaveformSegmentBase` gives it to `WaveformTransformationArgs`) that returns a tuple with:

- Reference to the actual parent object - this is used by the engine to backtrack up the tree.
- A character ID used to signify the child type. Can be `None` if the parent only has one type of child (e.g. currently `AWGOutputChannel` only has one child type being `AWGOutputMarker`)

Some character IDs currently implemented are:

- `'w'` for waveform segments inside a `WaveformAWG` HAL object.
- `'c'` for channels inside a `WaveformAWG` HAL object.

The function `_resolve_sqdobj_tree` in the `Laboratory` uses the `Parent` property to generate a list of the tuples (name and object type) required to resolve the object. For example to get to a waveform segment `'drive'` inside a `WaveformAWG` HAL called `'wfmRabi'` would be: `[['wfmRabi', 'HAL'], ['drive', 'w']]`. That is, it states that the root parent is a HAL and then subsequent object is a type `'w'` which `WaveformAWG` internally interprets as a waveform segment.

These identification lists are stored in the configuration files when saving experiments. For example, when instantiating a `VariableProperty`, it will require a pointer to the actual object; an object that is resolved from said list via the methods discussed in the next subsection.

## Object resolution

Given a list of tuples generated by `_resolve_sqdobj_tree` can be resolved via the function `_get_resolved_obj` in the `Laboratory` object. It does so by using the `_get_child` which has the following properties:

- It takes in one tuple as its input. The tuple contains a string denoting the child's name (typically the child has a `Name` property denoting its name) and a string denoting its type (e.g. `'w'` and `'c'` as discussed in the previous subsection).
- It returns a reference to the child object as requested.


